<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Timer App</title>
</head>
<body style="font-family:Arial;max-width:600px;margin:50px auto;">

<div id="timer" style="font-size:48px;font-weight:bold;">0</div>

<button id="startBtn" onclick="startTimer()" style="background:green;color:white;">Start</button>
<button id="stopBtn" onclick="stopTimer()" disabled style="background:red;color:white;">Stop</button>
<button onclick="resetTimer()" style="background:orange;color:white;">Reset</button>

<script>
let counter = 0;
let interval = null;
let startTime = null;
let startTimestamp = null;

function speak(text) {
    speechSynthesis.cancel();
    const u = new SpeechSynthesisUtterance(text.toString());
    speechSynthesis.speak(u);
}

function startTimer() {
    let countdown = 5;
    speak("Timer should start in 5 seconds");

    const pre = setInterval(() => {
        countdown--;
        if (countdown > 0) speak(countdown);

        if (countdown === 0) {
            clearInterval(pre);

            counter = 0;
            startTime = new Date().toLocaleString();
            startTimestamp = Date.now();

            document.getElementById("startBtn").disabled = true;
            document.getElementById("stopBtn").disabled = false;

            interval = setInterval(() => {
                counter++;
                document.getElementById("timer").textContent = counter;

                let speakText = counter === 30 ? "three zero" : counter;

                if (counter === 2 || counter === 4 || counter === 6 || (counter >= 7 && counter <= 10)) {
                    speak(speakText);
                }
            }, 1000);
        }
    }, 1000);
}

function stopTimer() {
    if (interval) clearInterval(interval);
    interval = null;

    document.getElementById("startBtn").disabled = false;
    document.getElementById("stopBtn").disabled = true;
}

function resetTimer() {
    if (interval) clearInterval(interval);
    interval = null;
    counter = 0;
    startTime = null;
    startTimestamp = null;
    document.getElementById("timer").textContent = 0;
    document.getElementById("startBtn").disabled = false;
    document.getElementById("stopBtn").disabled = true;
}
</script>

</body>
</html>
