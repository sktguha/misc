<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Multi-Site Search</title>
</head>
<body>
  <h2>Search Bluetooth Dongle</h2>
  <input type="text" id="query" placeholder="Enter search term">
  <br><br>

  <button onclick="openBlinkit()">Blinkit</button>
  <button onclick="openSwiggy()">Swiggy</button>
  <button onclick="openZepto()">Zepto</button>
  <button onclick="openAmazon()">Amazon</button>
  <button onclick="openAll()">Open All</button>
  <button onclick="openAllWithAmazon()">Amazon+Open All</button>

  <script>
    let blinkitTab, swiggyTab, zeptoTab, amazonTab;

    function getQuery() {
      return encodeURIComponent(document.getElementById('query').value.trim());
    }

    function openBlinkit() {
      const q = getQuery();
      if (!q) return;
      const url = `https://blinkit.com/s/?q=${q}`;
      if (!blinkitTab || blinkitTab.closed) {
        blinkitTab = window.open(url, '_blank');
      } else {
        blinkitTab.location.href = url;
        blinkitTab.focus();
      }
    }

    function openSwiggy() {
      const q = getQuery();
      if (!q) return;
      const url = `https://www.swiggy.com/instamart/search?custom_back=true&query=${q}`;
      if (!swiggyTab || swiggyTab.closed) {
        swiggyTab = window.open(url, '_blank');
      } else {
        swiggyTab.location.href = url;
        swiggyTab.focus();
      }
    }

    function openZepto() {
      const q = getQuery();
      if (!q) return;
      const url = `https://www.zeptonow.com/search?query=${q}`;
      if (!zeptoTab || zeptoTab.closed) {
        zeptoTab = window.open(url, '_blank');
      } else {
        zeptoTab.location.href = url;
        zeptoTab.focus();
      }
    }

    function openAmazon() {
      const q = getQuery();
      if (!q) return;
      const url = `https://www.amazon.in/s?k=${q}`;
      if (!amazonTab || amazonTab.closed) {
        amazonTab = window.open(url, '_blank');
      } else {
        amazonTab.location.href = url;
        amazonTab.focus();
      }
    }

    // Original Open All logic preserved
    function openAll() {
      openBlinkit();
      openSwiggy();
      openZepto();
    }

    function openAllWithAmazon() {
      openAll();  // calls original Open All
      openAmazon(); // adds Amazon
    }

    // Ctrl + Enter shortcut to trigger original Open All
    document.addEventListener('keydown', function(e) {
      if (e.ctrlKey && e.key === 'Enter') {
        openAll();
      }
    });
  </script>
</body>
</html>
